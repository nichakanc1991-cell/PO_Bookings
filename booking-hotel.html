<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>P.O. CAT HOTEL | ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡πÅ‡∏°‡∏ß</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --po-green: #0F3B2E;
      --po-cream: #F2E2C4;
      --po-gold: #D5B774;
    }
    body { background: #F7F6EE; font-family: "Prompt", sans-serif; }
    input, select { border: 1.5px solid var(--po-gold); }

    .popup-bg {
      position: fixed; inset: 0;
      background: rgba(15, 59, 46, 0.6);
      display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(3px);
      z-index: 50;
    }
    .popup-box {
      background: var(--po-cream);
      border: 3px solid var(--po-gold);
      border-radius: 1rem;
      padding: 2rem;
      max-width: 400px;
      color: var(--po-green);
      text-align: center;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn { from {opacity:0;transform:scale(0.9);} to {opacity:1;transform:scale(1);} }
    .popup-btn {
      background: var(--po-green);
      color: var(--po-cream);
      border-radius: 9999px;
      padding: 0.6rem 1.2rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    .popup-btn:hover { background: #164D3D; }
    .cat-item button {
  background: none;
  border: none;
  cursor: pointer;
}
    .cat-item button {
  background: none;
  border: none;
  cursor: pointer;
}


  </style>
</head>

<body class="text-[var(--po-green)]">
  <header class="bg-[var(--po-green)] text-[var(--po-cream)] py-6 text-center">
    <h1 class="text-3xl font-bold">P.O. CAT HOTEL</h1>
    <p>Private & Premium Stay for Cats</p>
  </header>

  <section class="max-w-3xl mx-auto bg-white mt-6 rounded-3xl shadow-lg p-8 border-4 border-[var(--po-gold)]">
    <h2 class="text-2xl font-semibold mb-6">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h2>

    <form id="bookingForm" class="space-y-6">
      <div>
        <label class="block mb-2 font-semibold">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</label>
        <input type="text" id="customerName" class="w-full rounded-lg p-2" required>
      </div>

      <div>
        <label class="block mb-2 font-semibold">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
        <input type="text" id="customerPhone" class="w-full rounded-lg p-2" required>
      </div>

      <div>
        <label class="block mb-2 font-semibold">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</label>
        <select id="roomType" class="w-full rounded-lg p-2">
          <option value="standard">Standard Room (‡∏ø250/‡∏Ñ‡∏∑‡∏ô)</option>
          <option value="suite">Suite Room (‡∏ø500/‡∏Ñ‡∏∑‡∏ô)</option>
        </select>
      </div>
      
      <div>
  <label class="block mb-2 font-semibold">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏£‡∏ß‡∏°‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°</label>
  <select id="standardOption" class="w-full rounded-lg p-2">
    <option value="same">‡∏£‡∏ß‡∏°‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (+150 ‡∏ö‡∏≤‡∏ó)</option>
    <option value="separate">‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏° (+250 ‡∏ö‡∏≤‡∏ó)</option>
  </select>
</div>


      <div id="catNamesContainer">
        <label class="block mb-2 font-semibold">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</label>
        <div id="catNameList" class="space-y-2">
          <input type="text" name="catName[]" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 1" class="w-full rounded-lg p-2">
        </div>
        <button type="button" id="addCatBtn" class="text-[var(--po-green)] underline mt-2">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß</button>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block mb-2 font-semibold">‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Å‡∏≠‡∏¥‡∏ô</label>
          <input type="date" id="checkinDate" class="w-full rounded-lg p-2 mb-2" required>
          <select id="checkinTime" class="w-full rounded-lg p-2">
  <option value="12">10:00</option>
  <option value="13">11:00</option>
  <option value="12">12:00</option>
  <option value="13">13:00</option>
  <option value="14">14:00</option>
  <option value="15">15:00</option>
  <option value="16">16:00</option>
  <option value="17">17:00</option>
  <option value="18">18:00</option>
  <option value="19">19:00</option>
  <option value="20">20:00</option>
  <option value="21">21:00</option>
  <option value="22">22:00</option>
  <option value="23">23:00</option>
  <option value="24">24:00</option>
          </select>
        </div>
        <div>
          <label class="block mb-2 font-semibold">‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå</label>
          <input type="date" id="checkoutDate" class="w-full rounded-lg p-2 mb-2" required>
          <select id="checkoutTime" class="w-full rounded-lg p-2">
  <option value="12">10:00</option>
  <option value="13">11:00</option>
  <option value="12">12:00</option>
  <option value="13">13:00</option>
  <option value="14">14:00</option>
  <option value="15">15:00</option>
  <option value="16">16:00</option>
  <option value="17">17:00</option>
  <option value="18">18:00</option>
  <option value="19">19:00</option>
  <option value="20">20:00</option>
  <option value="21">21:00</option>
  <option value="22">22:00</option>
  <option value="23">23:00</option>
  <option value="24">24:00</option>
          </select>
        </div>
      </div>

      <div class="border-t pt-4 font-semibold">
        <p id="durationText"></p>
        <p>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="totalPrice">0</span> ‡∏ö‡∏≤‡∏ó</p>
        <p>‡∏°‡∏±‡∏î‡∏à‡∏≥ 50%: <span id="depositAmount">0</span> ‡∏ö‡∏≤‡∏ó</p>
      </div>

      <button type="submit"
        class="w-full bg-[var(--po-green)] text-[var(--po-cream)] py-3 rounded-lg mt-6 hover:bg-[#164D3D] transition">
        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
      </button>
    </form>
  </section>

  <!-- Popup QR -->
  <div id="popup" class="popup-bg hidden">
    <div class="popup-box">
      <h3 class="text-xl font-bold mb-2">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏à‡∏≥ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡πÉ‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á<br> (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏î‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡πà‡∏∞)</h3>
      <img src="qr.png" alt="QR" class="w-56 mx-auto rounded-lg mb-3">
      <p id="deposit-summary" class="text-lg font-semibold"></p>
      <a id="lineConfirm" target="_blank" class="popup-btn block mt-4">üí¨ ‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô‡πÉ‡∏ô LINE</a>
      <button id="nextPage" class="popup-btn block mt-3 bg-[var(--po-gold)] text-[var(--po-green)]">‚û° ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    </div>
  </div>

  <script>

// ----------------------------------------------------------
// 1) ELEMENT ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
// ----------------------------------------------------------
const form = document.getElementById("bookingForm");
const totalEl = document.getElementById("totalPrice");
const depositEl = document.getElementById("depositAmount");
const durationText = document.getElementById("durationText");
const popup = document.getElementById("popup");

const addCatBtn = document.getElementById("addCatBtn");
const catNameList = document.getElementById("catNameList");

const roomTypeSelect = document.getElementById("roomType");
const standardOptionDiv = document.getElementById("standardOption").parentElement;


// ----------------------------------------------------------
// 2) ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Default Setup)
// ----------------------------------------------------------
const today = new Date().toISOString().split("T")[0];
document.getElementById("checkinDate").value = today;

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö UI ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
updateRoomDisplay();


// ----------------------------------------------------------
// 3) ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏°‡∏ß
// ----------------------------------------------------------
addCatBtn.addEventListener("click", () => {

  const count = catNameList.querySelectorAll(".cat-item").length + 1;

  const wrapper = document.createElement("div");
  wrapper.className = "cat-item flex items-center gap-2";

  const input = document.createElement("input");
  input.type = "text";
  input.name = "catName[]";
  input.placeholder = "‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà " + count;
  input.className = "flex-1 rounded-lg p-2 mt-1 border border-[var(--po-gold)] focus:ring-2 focus:ring-[var(--po-green)]";

  const removeBtn = document.createElement("button");
  removeBtn.type = "button";
  removeBtn.textContent = "‚úñ";
  removeBtn.className = "text-red-500 text-lg font-bold hover:text-red-700 mt-1";

  removeBtn.addEventListener("click", () => {
    wrapper.remove();
    updateCatPlaceholders();
    calculateTotal();
    updateRoomDisplay();
  });

  wrapper.appendChild(input);
  wrapper.appendChild(removeBtn);
  catNameList.appendChild(wrapper);

  input.scrollIntoView({ behavior: "smooth", block: "center" });

  updateRoomDisplay();
});


// ----------------------------------------------------------
// 4) ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç placeholder ‡∏Ç‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß
// ----------------------------------------------------------
function updateCatPlaceholders() {
  const cats = catNameList.querySelectorAll("input[name='catName[]']");
  cats.forEach((input, i) => {
    input.placeholder = "‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà " + (i + 1);
  });
}


// ----------------------------------------------------------
// 5) ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
// ----------------------------------------------------------
function calculateTotal() {
  const room = form.roomType.value;
  const cats = catNameList.querySelectorAll("input[name='catName[]']").length;

  const checkinDateValue = form.checkinDate.value;
  const checkoutDateValue = form.checkoutDate.value;
  const checkinTimeValue = form.checkinTime.value;
  const checkoutTimeValue = form.checkoutTime.value;

  if (!checkinDateValue || !checkoutDateValue) return;

  let fixedCheckinDate = checkinDateValue;
  let fixedCheckoutDate = checkoutDateValue;

  let fixedCheckinTime = checkinTimeValue;
  let fixedCheckoutTime = checkoutTimeValue;

  // ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ß‡∏•‡∏≤ 24:00 ‚Üí ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô 00:00 ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  if (fixedCheckoutTime === "24") {
    const nextDay = new Date(fixedCheckoutDate);
    nextDay.setDate(nextDay.getDate() + 1);
    fixedCheckoutDate = nextDay.toISOString().split("T")[0];
    fixedCheckoutTime = "00";
  }

  if (fixedCheckinTime === "24") {
    const nextDay = new Date(fixedCheckinDate);
    nextDay.setDate(nextDay.getDate() + 1);
    fixedCheckinDate = nextDay.toISOString().split("T")[0];
    fixedCheckinTime = "00";
  }

  const checkin = new Date(
    `${fixedCheckinDate}T${fixedCheckinTime.padStart(2, "0")}:00:00`
  );
  const checkout = new Date(
    `${fixedCheckoutDate}T${fixedCheckoutTime.padStart(2, "0")}:00:00`
  );

  const diffMs = checkout - checkin;
  const diffHours = diffMs / (1000 * 60 * 60);

  if (diffHours <= 0) {
    durationText.textContent = "";
    totalEl.textContent = 0;
    depositEl.textContent = 0;
    return;
  }

  // ‡πÅ‡∏¢‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏ï‡πá‡∏° ‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏Å‡∏¥‡∏ô
  const fullDays = Math.floor(diffHours / 24);
  const extraHours = diffHours - fullDays * 24;

  const standardOption =
    document.getElementById("standardOption")?.value || "same";

  let total = 0;
  let hourlyRate = 0;
  let days = 1;      // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
  let extraFee = 0;  // ‡∏Ñ‡πà‡∏≤‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏Å‡∏¥‡∏ô (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 12 ‡∏ä‡∏°.)

  // ‡πÄ‡∏Ñ‡∏™‡∏û‡∏±‡∏Å‡∏™‡∏±‡πâ‡∏ô ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
  if (diffHours <= 3) {
    hourlyRate = room === "standard" ? 50 : 150;
    days = 1;
  } else if (diffHours <= 12) {
    hourlyRate = room === "standard" ? 150 : 300;
    days = 1;
  } else {
    // ‡πÄ‡∏Ñ‡∏™‡∏û‡∏±‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
    let d = fullDays;
    if (d < 1) d = 1; // ‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏•‡∏Ç‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

    if (extraHours > 0 && extraHours <= 12) {
      // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏Å‡∏¥‡∏ô‡∏°‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 12 ‡∏ä‡∏°. ‚Üí ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏ï‡πá‡∏°
      if (room === "standard") {
        extraFee = 150; // ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏ö‡πà‡∏ô‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô 150 ‡πÅ‡∏ï‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏î‡∏ô 250
      } else if (room === "suite") {
        extraFee = 300; // ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏ó‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 12 ‡∏ä‡∏°. ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á suite
      }
    } else if (extraHours > 12) {
      // ‡πÄ‡∏Å‡∏¥‡∏ô 12 ‡∏ä‡∏°. ‚Üí ‡∏ô‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡∏Å 1 ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏ï‡πá‡∏°
      d += 1;
    }

    days = d;
  }

  // SUITE ROOM
  if (room === "suite") {
    if (cats === 1) total = (hourlyRate || 500) * days;
    else if (cats === 2) total = (hourlyRate ? hourlyRate * 1.4 : 700) * days;
    else if (cats === 3) total = (hourlyRate ? hourlyRate * 1.8 : 900) * days;
    else return alert("‡∏´‡πâ‡∏≠‡∏á Suite ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏ï‡∏±‡∏ß");
  }

  // STANDARD ROOM
  else if (room === "standard") {
    const basePrice = hourlyRate || 250;

    if (cats === 1) {
      total = basePrice * days;
    } else if (cats === 2) {
      total =
        standardOption === "same"
          ? (basePrice + (hourlyRate ? 30 : 150)) * days
          : basePrice * 2 * days;
    } else if (cats === 3) {
      total = (basePrice + (hourlyRate ? 30 : 150) + basePrice) * days;
    } else return alert("‡∏´‡πâ‡∏≠‡∏á Standard ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏ï‡∏±‡∏ß");
  }

  // ‡∏ö‡∏ß‡∏Å‡∏Ñ‡πà‡∏≤‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏Å‡∏¥‡∏ô (‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏±‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô + ‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 12 ‡∏ä‡∏°.)
  total += extraFee;

  const deposit = total * 0.5;

  // ‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ß‡∏±‡∏ô + ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (‡πÉ‡∏ä‡πâ diffHours ‡πÄ‡∏î‡∏¥‡∏°)
  const daysStayed = Math.floor(diffHours / 24);
  const hoursStayed = Math.round(diffHours % 24);

  let durationString = "";
  if (daysStayed > 0) durationString += `${daysStayed} ‡∏ß‡∏±‡∏ô `;
  if (hoursStayed > 0) durationString += `${hoursStayed} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á`;

  if (durationString.trim() === "") durationString = "0 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á";

  durationText.textContent = `‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å: ${durationString} (${cats} ‡∏ï‡∏±‡∏ß)`;

  totalEl.textContent = total.toLocaleString("th-TH");
  depositEl.textContent = deposit.toLocaleString("th-TH");
}

// ----------------------------------------------------------
// 6) ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô dropdown "‡∏û‡∏±‡∏Å‡∏£‡∏ß‡∏°/‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°"
// ----------------------------------------------------------
function updateRoomDisplay() {

  const catCount = document.querySelectorAll("input[name='catName[]']").length;
  const roomType = roomTypeSelect.value;

  if (catCount < 2) {
    standardOptionDiv.style.display = "none";
    document.getElementById("standardOption").value = "same";
    return;
  }

  if (roomType !== "standard") {
    standardOptionDiv.style.display = "none";
    document.getElementById("standardOption").value = "same";
    return;
  }

  standardOptionDiv.style.display = "block";
}


// ----------------------------------------------------------
// 7) EVENT LISTENERS
// ----------------------------------------------------------
form.addEventListener("input", calculateTotal);
document.getElementById("checkinTime").addEventListener("change", calculateTotal);
document.getElementById("checkoutTime").addEventListener("change", calculateTotal);
document.getElementById("standardOption").addEventListener("change", calculateTotal);

roomTypeSelect.addEventListener("change", updateRoomDisplay);
form.addEventListener("input", updateRoomDisplay);


// ----------------------------------------------------------
// 8) ‡∏ü‡∏≠‡∏£‡πå‡∏° submit
// ----------------------------------------------------------
form.addEventListener("submit", e => {
  e.preventDefault();

  const name = form.customerName.value.trim();
  const phone = form.customerPhone.value.trim();
  const room = form.roomType.value === "standard" ? "Standard Room" : "Suite Room";
  const catNames = [...catNameList.querySelectorAll("input")]
    .map(i => i.value.trim())
    .filter(Boolean);

  const checkinDate = form.checkinDate.value;
  const checkoutDate = form.checkoutDate.value;

  const checkinTimeRaw  = form.checkinTime.value;   // "10".."24"
  const checkoutTimeRaw = form.checkoutTime.value;  // "10".."24"

  // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô "HH:00" ‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô receipt
  const checkinTimeText  = checkinTimeRaw.toString().padStart(2, "0")  + ":00";
  const checkoutTimeText = checkoutTimeRaw.toString().padStart(2, "0") + ":00";

  const total   = Number(totalEl.textContent.replace(/[^0-9.]/g, ""));
  const deposit = Number(depositEl.textContent.replace(/[^0-9.]/g, ""));

  if (catNames.length === 0) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß");
  if (!/^[0-9]{9,10}$/.test(phone)) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
  if (!total || !deposit) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");

  const catsText = catNames.join(", ");

  // ‡∏Ñ‡∏¥‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡πà‡∏≤‡∏ß ‡πÜ
  const standardOption = document.getElementById("standardOption").value;
  let rooms = 1;
  if (form.roomType.value === "standard" && catNames.length >= 2 && standardOption === "separate") {
    rooms = 2; // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏´‡πâ‡∏≠‡∏á
  }

  const text = encodeURIComponent(
    `üìã ‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å PO CAT HOTEL
‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á: ${name}
‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${phone}
‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß: ${catsText}
‡∏´‡πâ‡∏≠‡∏á: ${room}
‡∏¢‡∏≠‡∏î‡∏°‡∏±‡∏î‡∏à‡∏≥: ${deposit} ‡∏ö‡∏≤‡∏ó`
  );

  document.getElementById("lineConfirm").href =
    `https://line.me/R/oaMessage/@po_grooming/?text=${text}`;

  document.getElementById("deposit-summary").innerHTML =
    `‡∏¢‡∏≠‡∏î‡∏°‡∏±‡∏î‡∏à‡∏≥: <b>${deposit} ‡∏ö‡∏≤‡∏ó</b>`;

  popup.classList.remove("hidden");

  document.getElementById("nextPage").onclick = () => {
    document.getElementById("nextPage").disabled = true;

    window.location.href =
      `receipt.html` +
      `?name=${encodeURIComponent(name)}` +
      `&phone=${phone}` +
      `&room=${encodeURIComponent(room)}` +
      `&cats=${encodeURIComponent(catsText)}` +
      `&deposit=${deposit}` +
      `&total=${total}` +
      `&checkin=${checkinDate}` +
      `&checkout=${checkoutDate}` +
      `&checkinTime=${encodeURIComponent(checkinTimeText)}` +
      `&checkoutTime=${encodeURIComponent(checkoutTimeText)}` +
      `&rooms=${rooms}`;
  };
});

</script>
</body>
</html>
